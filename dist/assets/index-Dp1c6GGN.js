(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const{DateTime:u,Interval:_}=luxon,b=u.fromISO("2025-12-20T16:00:00",{zone:"America/Toronto"}),C=u.fromISO("2025-08-24T10:00:00",{zone:"Europe/Zurich"});_.fromDateTimes(C,b);const tt=document.getElementById("countdown"),et=document.getElementById("progress"),nt=document.getElementById("progressLabel"),ot=document.getElementById("loveMessage"),st=document.getElementById("lausanneTime"),rt=document.getElementById("quebecTime"),at=document.getElementById("realDistance"),ct=document.getElementById("symbolicDistance"),it=document.getElementById("toggleHearts"),lt=document.getElementById("particleMode");document.getElementById("showOverlayPhotos");const B=["Chaque seconde nous rapproche üíó","Encore un c√¢lin de plus bient√¥t ü§ó","La distance n‚Äôarr√™te pas l‚Äôamour ‚úàÔ∏è‚ù§Ô∏è","Nos deux fuseaux, un seul c≈ìur üåçüíû"];let q=0;function O(){const t=u.now(),e=b.toUTC().diff(t.toUTC(),["days","hours","minutes","seconds"]),r=Math.max(0,Math.floor(e.days)),c=Math.max(0,Math.floor(e.hours)),n=Math.max(0,Math.floor(e.minutes)),a=Math.max(0,Math.floor(e.seconds));tt.textContent=`${r} jours ${c} h ${n} min ${a} s`,e.as("seconds")<=0&&wt()}setInterval(O,1e3);O();function N(){const t=u.now(),e=b.toUTC().diff(C.toUTC()).as("seconds"),r=t.toUTC().diff(C.toUTC()).as("seconds"),c=Math.min(100,Math.max(0,r/e*100));et.style.width=c.toFixed(1)+"%";const n=Math.max(0,Math.floor((e-r)/3600));nt.textContent=`Progression: ${c.toFixed(1)}% ‚Äî ~${n} h restantes`}setInterval(N,1e3);N();function R(){ot.textContent=B[q%B.length],q++}setInterval(R,4e3);R();function z(t,e){return t.setZone(e).toFormat("cccc dd LLL yyyy -  HH:mm:ss 'GMT'ZZ")}function U(){const t=u.now();st.textContent=z(t,"Europe/Zurich"),rt.textContent=z(t,"America/Toronto")}setInterval(U,1e3);U();const f={coords:[46.5197,6.6323]},w={coords:[46.8139,-71.208]},y=L.map("map",{zoomControl:!0}),dt=L.latLngBounds([f.coords,w.coords]);y.fitBounds(dt,{padding:[20,20]});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"¬© OpenStreetMap"}).addTo(y);L.marker(f.coords).addTo(y).bindPopup("Lausanne üá®üá≠");L.marker(w.coords).addTo(y).bindPopup("Qu√©bec üá®üá¶");L.polyline([f.coords,w.coords],{color:"#ec4899",weight:3,opacity:.8}).addTo(y);const ut=L.divIcon({html:"‚úàÔ∏è",className:"",iconSize:[24,24],iconAnchor:[12,12]}),ht=L.marker(f.coords,{icon:ut}).addTo(y),S=12e3;function F(t,e,r){return t+(e-t)*r}function mt(t){const[e,r]=f.coords,[c,n]=w.coords;return[F(e,c,t),F(r,n,t)]}function $(t){const e=t%S/S,r=e<.5?e*2:1-(e-.5)*2;ht.setLatLng(mt(r)),requestAnimationFrame($)}requestAnimationFrame($);function ft([t,e],[r,c]){const a=Y=>Y*Math.PI/180,p=a(r-t),V=a(c-e),X=Math.sin(p/2)**2+Math.cos(a(t))*Math.cos(a(r))*Math.sin(V/2)**2;return 6371*2*Math.asin(Math.sqrt(X))}const D=ft(f.coords,w.coords);at.textContent=D.toFixed(0)+" km";function H(){const t=u.now(),e=b.toUTC().diff(C.toUTC()).as("seconds"),c=Math.max(0,b.toUTC().diff(t.toUTC()).as("seconds"))/e,n=D*c;ct.textContent=n.toFixed(0)+" km"}setInterval(H,1e3);H();const k=["Loin des yeux, pr√®s du c≈ìur.","Le temps passe, l'amour reste.","Chaque jour nous rapproche.","Nos minutes comptent double.","Nos deux √©toiles brillent ensemble.","Ton absence √©crit mon manque.","Je trace ta main dans le ciel.","Notre horizon se rejoint.","Le c≈ìur conna√Æt le chemin.","Bient√¥t: toi et moi, ici."];function yt(){const t=u.now().setZone("Europe/Zurich"),e=(t.ordinal+t.year)%k.length;document.getElementById("dailyQuote").textContent="‚Äú"+k[e]+"‚Äù"}yt();document.getElementById("timeline");const o=document.createElement("div");o.className="overlay";o.style.zIndex="1";o.style.opacity=0;o.style.transition="opacity 0.4s";document.body.appendChild(o);const g=document.createElement("button");g.textContent="√ó";g.className="absolute top-6 right-8 text-3xl text-white bg-transparent border-none cursor-pointer z-50";o.appendChild(g);g.addEventListener("click",()=>{o.style.opacity=0,o.style.zIndex="1"});const A=["./src/img/1.jpg","https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1600","https://images.unsplash.com/photo-1491555103944-7c647fd857e6?q=80&w=1600"];let E=0;function gt(){const t=A[E];o.innerHTML=`
    <div class="flex flex-col items-center justify-center max-w-3xl p-4 text-center relative">
      <img src="${t}" alt="Photo ${E+1}" class="rounded-lg max-h-[80vh] max-w-full mb-4" />
      <button class="absolute top-6 right-8 text-3xl text-white bg-transparent border-none cursor-pointer">√ó</button>
    </div>
  `,o.querySelector("button").addEventListener("click",()=>{o.style.opacity=0,o.style.zIndex="1"}),o.style.zIndex="10000",o.style.opacity=1,E=(E+1)%A.length}const pt=document.getElementById("showOverlayPhotos");pt.addEventListener("click",gt);o.addEventListener("click",t=>{t.target===o&&(o.style.opacity=0,o.style.zIndex="1")});document.body.appendChild(o);o.appendChild(g);function Z(){o.classList.remove("visible"),o.addEventListener("transitionend",()=>{o.style.zIndex="1"},{once:!0})}g.addEventListener("click",Z);o.addEventListener("click",t=>{t.target===o&&Z()});const l=document.getElementById("starsCanvas"),d=l.getContext("2d");let j=[];function K(){[l,m,i].forEach(t=>{t.width=innerWidth,t.height=innerHeight}),j=Array.from({length:180},()=>({x:Math.random()*l.width,y:Math.random()*l.height,r:Math.random()*1.2+.3,a:Math.random()*Math.PI*2,sp:Math.random()*.02+.005}))}window.addEventListener("resize",K);function Q(){d.clearRect(0,0,l.width,l.height),d.fillStyle="#0b1020",d.fillRect(0,0,l.width,l.height);for(const t of j){t.a+=t.sp;const e=(Math.sin(t.a)+1)/2;d.beginPath(),d.arc(t.x,t.y,t.r*(.5+e*.5),0,Math.PI*2),d.fillStyle=`rgba(255,255,255,${.5+e*.5})`,d.fill()}requestAnimationFrame(Q)}const m=document.getElementById("particlesCanvas"),s=m.getContext("2d");let I=!1,T="hearts",h=[];function xt(){const t=Math.random()*m.width,e=-20,r=Math.random()*1.2+.6,c=Math.random()*.7+.6,n=(Math.random()-.5)*.5;h.push({x:t,y:e,s:r,vy:c,vx:n,a:Math.random()*Math.PI*2})}function Mt(t){s.save(),s.translate(t.x,t.y),s.scale(t.s*16,t.s*16),s.rotate(Math.sin(t.a)*.2),T==="hearts"?(s.fillStyle="#ec4899",s.beginPath(),s.moveTo(0,-.2),s.bezierCurveTo(-.5,-.8,-1,-.1,0,.6),s.bezierCurveTo(1,-.1,.5,-.8,0,-.2),s.fill()):T==="snow"?(s.fillStyle="white",s.beginPath(),s.arc(0,0,.25,0,Math.PI*2),s.fill()):(s.fillStyle="#f472b6",s.beginPath(),s.ellipse(0,.15,.18,.35,0,0,Math.PI*2),s.fill(),s.beginPath(),s.ellipse(0,-.15,.18,.35,0,0,Math.PI*2),s.fill()),s.restore()}function W(){if(I){if(h.length<120)for(let t=0;t<4;t++)xt();s.clearRect(0,0,m.width,m.height);for(const t of h)t.a+=.03,t.x+=t.vx+Math.sin(t.a)*.2,t.y+=t.vy,Mt(t);h=h.filter(t=>t.y<m.height+40),requestAnimationFrame(W)}}it.addEventListener("click",()=>{I=!I,I&&(h=[],W())});lt.addEventListener("change",t=>{T=t.target.value});const i=document.getElementById("fireworksCanvas"),x=i.getContext("2d");let P=!1,M=[],v=[],G=0;function vt(){const t=Math.random()*i.width*.8+i.width*.1,e=i.height,r=-(Math.random()*6+9),c=`hsl(${Math.floor(Math.random()*360)},90%,60%)`;M.push({x:t,y:e,vx:(Math.random()-.5)*2,vy:r,color:c,life:Math.random()*20+40})}function bt(t,e,r){for(let c=0;c<80;c++){const n=Math.random()*Math.PI*2,a=Math.random()*4+2;v.push({x:t,y:e,vx:Math.cos(n)*a,vy:Math.sin(n)*a,life:60,color:r})}}function J(){if(P){if(x.fillStyle="rgba(0,0,0,0.2)",x.fillRect(0,0,i.width,i.height),Math.random()<.05&&vt(),M.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.vy+=.15,t.life--,t.life<=0&&(bt(t.x,t.y,t.color),t.life=1/0)}),M=M.filter(t=>t.y<i.height&&t.life!==1/0),v.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.vy+=.05,t.life--,x.fillStyle=t.color,x.fillRect(t.x,t.y,2,2)}),v=v.filter(t=>t.life>0),Date.now()>G&&v.length===0&&M.length===0){P=!1,x.clearRect(0,0,i.width,i.height);return}requestAnimationFrame(J)}}function wt(){P||(P=!0,G=Date.now()+1e4,J())}K();Q();
